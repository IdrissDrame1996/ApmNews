{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SearchProvider = exports.SearchContext = void 0;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _asyncStorage = _interopRequireDefault(require(\"@react-native-async-storage/async-storage\"));\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _config = require(\"../config\");\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\idriss.drame\\\\Projet\\\\ApmNews\\\\src\\\\context\\\\SearchContext.js\";\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar SearchContext = (0, _react.createContext)();\nexports.SearchContext = SearchContext;\nvar SearchProvider = function SearchProvider(_ref) {\n  var children = _ref.children;\n  var _useState = (0, _react.useState)({}),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    resultSearch = _useState2[0],\n    setSearch = _useState2[1];\n  var _useState3 = (0, _react.useState)(false),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    isLoadingSearch = _useState4[0],\n    setIsLoadingSearch = _useState4[1];\n  var _useState5 = (0, _react.useState)(null),\n    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n    categoryText = _useState6[0],\n    setCategory = _useState6[1];\n  var _useState7 = (0, _react.useState)(null),\n    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n    keywordText = _useState8[0],\n    setKeyword = _useState8[1];\n  var _useState9 = (0, _react.useState)(15),\n    _useState10 = (0, _slicedToArray2.default)(_useState9, 2),\n    count = _useState10[0],\n    setCount = _useState10[1];\n  var incrementByFifteen = function incrementByFifteen() {\n    var newStart = count + 15;\n    console.log(newStart + \" DFS\");\n    return newStart;\n  };\n  var getNews = function getNews(usertoken, category, keyword, nbdeLignes) {\n    var categoryText = category;\n    var keywordText = keyword;\n    var count = nbdeLignes;\n    setCount(count);\n    setCategory(category);\n    setKeyword(keyword);\n    console.log(keywordText + \" Keyword TEXT\");\n    console.log(count + \" Count\");\n    _asyncStorage.default.setItem('categoryText', JSON.stringify(category));\n    _asyncStorage.default.setItem('keywordText', JSON.stringify(keyword));\n    _asyncStorage.default.setItem('count', JSON.stringify(count));\n    setIsLoadingSearch(true);\n    _axios.default.get('https://app.apmnews.com/1.0/search.php', {\n      params: {\n        user_token: usertoken,\n        category: categoryText,\n        keyword: keywordText,\n        page_number: \"1\",\n        results_per_page: count,\n        deviceId: \"IDDevice123456789\",\n        _: \"1682543166278\"\n      }\n    }).then(function (response) {\n      var resultSearch = response.data.articles;\n      console.log(\"BON RESULTAT\");\n      setSearch(resultSearch);\n      _asyncStorage.default.setItem('resultSearch', JSON.stringify(resultSearch));\n      setIsLoadingSearch(false);\n      setSearch(response.data.articles);\n    }).catch(function (error) {\n      console.log(error + \"ERREUR\");\n      setIsLoadingSearch(false);\n    }).then(function () {});\n  };\n  (0, _react.useEffect)(function () {}, []);\n  return (0, _jsxRuntime.jsx)(SearchContext.Provider, {\n    value: {\n      isLoadingSearch: isLoadingSearch,\n      resultSearch: resultSearch,\n      categoryText: categoryText,\n      keywordText: keywordText,\n      count: count,\n      setCount: setCount,\n      incrementByFifteen: incrementByFifteen,\n      getNews: getNews\n    },\n    children: children\n  });\n};\nexports.SearchProvider = SearchProvider;","map":{"version":3,"names":["_asyncStorage","_interopRequireDefault","require","_axios","_react","_interopRequireWildcard","_config","_jsxRuntime","_this","_jsxFileName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","SearchContext","createContext","exports","SearchProvider","_ref","children","_useState","useState","_useState2","_slicedToArray2","resultSearch","setSearch","_useState3","_useState4","isLoadingSearch","setIsLoadingSearch","_useState5","_useState6","categoryText","setCategory","_useState7","_useState8","keywordText","setKeyword","_useState9","_useState10","count","setCount","incrementByFifteen","newStart","console","log","getNews","usertoken","category","keyword","nbdeLignes","AsyncStorage","setItem","JSON","stringify","axios","params","user_token","page_number","results_per_page","deviceId","_","then","response","data","articles","catch","error","useEffect","jsx","Provider","value"],"sources":["C:/Users/idriss.drame/Projet/ApmNews/src/context/SearchContext.js"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport axios from 'axios';\r\nimport React, {createContext, useEffect, useState} from 'react';\r\n\r\nimport {BASE_URL} from '../config';\r\n\r\nexport const SearchContext = createContext();\r\n\r\n\r\nexport const SearchProvider = ({children}) => {\r\n\r\n  \r\n  const [resultSearch, setSearch] = useState({});\r\n  const [isLoadingSearch, setIsLoadingSearch] = useState(false);\r\n  const [categoryText, setCategory] = useState(null);\r\n\r\n  const [keywordText, setKeyword] = useState(null);\r\n  \r\n  const [count, setCount] = useState(15);\r\n \r\n\r\n        \r\n    const incrementByFifteen = () => {\r\n      const newStart = count + 15;\r\n      console.log(newStart + \" DFS\")\r\n   \r\n      return newStart\r\n    };\r\n  \r\n\r\n  const getNews = (usertoken,category, keyword, nbdeLignes) => {\r\n  \r\n\r\n   \r\n\r\n  \r\n    \r\n    let categoryText = category;\r\n    let keywordText = keyword;\r\n    let count = nbdeLignes;\r\n    setCount(count);\r\n    setCategory(category);\r\n    setKeyword(keyword);\r\n\r\n    console.log(keywordText +  \" Keyword TEXT\")\r\n    console.log(count +  \" Count\")\r\n\r\n\r\n    AsyncStorage.setItem('categoryText', JSON.stringify(category));\r\n    AsyncStorage.setItem('keywordText', JSON.stringify(keyword));\r\n    AsyncStorage.setItem('count', JSON.stringify(count));\r\n\r\n\r\n\r\n \r\n    setIsLoadingSearch(true);\r\n\r\n\r\n\r\n    \r\n      axios.get('https://app.apmnews.com/1.0/search.php',{\r\n          params:{\r\n            user_token : usertoken,\r\n            category: categoryText,\r\n            keyword : keywordText,\r\n            page_number : \"1\",\r\n            results_per_page : count,\r\n            deviceId : \"IDDevice123456789\",\r\n            _ : \"1682543166278\"\r\n\r\n          }\r\n      })\r\n          .then( (response) =>{\r\n              // handle success\r\n\r\n              let resultSearch = response.data.articles;\r\n          \r\n              console.log(\"BON RESULTAT\")\r\n\r\n            \r\n              setSearch(resultSearch);\r\n              AsyncStorage.setItem('resultSearch', JSON.stringify(resultSearch));\r\n         \r\n              setIsLoadingSearch(false);\r\n\r\n              setSearch(response.data.articles);\r\n              \r\n          })\r\n          .catch(function (error) {\r\n              // handle error\r\n              console.log(error + \"ERREUR\");\r\n              setIsLoadingSearch(false);\r\n          })\r\n          .then(function () {\r\n              // always executed\r\n          });\r\n  }\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    //getNews();\r\n  }, []);\r\n\r\n  return (\r\n    <SearchContext.Provider\r\n      value={{\r\n        isLoadingSearch,\r\n        resultSearch, \r\n        categoryText,\r\n        keywordText,  \r\n\r\n        count,\r\n        setCount,\r\n\r\n        incrementByFifteen,\r\n\r\n\r\n        getNews\r\n       \r\n      }}>\r\n      {children}\r\n    </SearchContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}