{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _asyncStorage = _interopRequireDefault(require(\"@react-native-async-storage/async-storage\"));\nvar _reactNative = require(\"react-native\");\nvar _reactNativeGestureHandler = require(\"react-native-gesture-handler\");\nvar _reactNativeLoadingSpinnerOverlay = _interopRequireDefault(require(\"react-native-loading-spinner-overlay\"));\nvar _AuthContext = require(\"../context/AuthContext\");\nvar _Articles = _interopRequireDefault(require(\"../components/Articles\"));\nvar _SearchContext = require(\"../context/SearchContext\");\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\idriss.drame\\\\Projet\\\\ApmNews\\\\src\\\\screens\\\\HomeScreen.js\";\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar HomeScreen = function HomeScreen() {\n  var _useContext = (0, _react.useContext)(_AuthContext.AuthContext),\n    userInfo = _useContext.userInfo,\n    isLoading = _useContext.isLoading;\n  var _useContext2 = (0, _react.useContext)(_SearchContext.SearchContext),\n    resultSearch = _useContext2.resultSearch,\n    setSearch = _useContext2.setSearch,\n    isLoadingSearch = _useContext2.isLoadingSearch;\n  var _useContext3 = (0, _react.useContext)(_SearchContext.SearchContext),\n    getNews = _useContext3.getNews;\n  var _useContext4 = (0, _react.useContext)(_SearchContext.SearchContext),\n    categoryText = _useContext4.categoryText,\n    keywordText = _useContext4.keywordText;\n  var _useContext5 = (0, _react.useContext)(_SearchContext.SearchContext),\n    count = _useContext5.count,\n    incrementByFifteen = _useContext5.incrementByFifteen;\n  var _React$useState = _react.default.useState(false),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    refreshing = _React$useState2[0],\n    setRefreshing = _React$useState2[1];\n  var renderFooter = function renderFooter() {\n    return (0, _jsxRuntime.jsx)(_reactNative.View, {\n      children: (0, _jsxRuntime.jsx)(_reactNative.Button, {\n        title: \"Plus de d\\xE9p\\xEAches\",\n        onPress: function onPress() {\n          incrementByFifteen();\n          getNews(userInfo.user_token, categoryText, keywordText, incrementByFifteen());\n        }\n      })\n    });\n  };\n  (0, _react.useEffect)(function () {\n    getNews(userInfo.user_token, categoryText, keywordText, count);\n  }, []);\n  var onRefresh = (0, _react.useCallback)(function () {\n    setRefreshing(true);\n    getNews(userInfo.user_token, categoryText, keywordText, count);\n    setRefreshing(false);\n  });\n  var resultSearchArticles = resultSearch;\n  return (0, _jsxRuntime.jsxs)(_reactNative.SafeAreaView, {\n    style: styles.container,\n    children: [(0, _jsxRuntime.jsx)(_reactNative.FlatList, {\n      data: resultSearch,\n      refreshControl: (0, _jsxRuntime.jsx)(_reactNative.RefreshControl, {\n        refreshing: refreshing,\n        onRefresh: onRefresh\n      }),\n      renderItem: function renderItem(_ref) {\n        var item = _ref.item;\n        return (0, _jsxRuntime.jsx)(_Articles.default, {\n          tag_color: item.tags ? item.tags[0].tag_color : \"\",\n          tag_name: item.tags ? item.tags[0].tag_name : \"\",\n          tag_color2: item.tags && item.tags.length > 1 ? item.tags[1].tag_color : \"\",\n          tag_name2: item.tags && item.tags.length > 1 ? item.tags[1].tag_name : \"\",\n          id: item.id,\n          title: item.title,\n          publishedAt: item.date\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item.title;\n      },\n      ListFooterComponent: renderFooter\n    }), (0, _jsxRuntime.jsx)(_reactNativeLoadingSpinnerOverlay.default, {\n      visible: isLoadingSearch\n    })]\n  });\n};\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  wrapper: {\n    width: '80%'\n  },\n  input: {\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: '#bbb',\n    borderRadius: 5,\n    paddingHorizontal: 14\n  },\n  link: {\n    color: 'blue'\n  }\n});\nvar _default = HomeScreen;\nexports.default = _default;","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_asyncStorage","_interopRequireDefault","_reactNative","_reactNativeGestureHandler","_reactNativeLoadingSpinnerOverlay","_AuthContext","_Articles","_SearchContext","_jsxRuntime","_this","_jsxFileName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","HomeScreen","_useContext","useContext","AuthContext","userInfo","isLoading","_useContext2","SearchContext","resultSearch","setSearch","isLoadingSearch","_useContext3","getNews","_useContext4","categoryText","keywordText","_useContext5","count","incrementByFifteen","_React$useState","React","useState","_React$useState2","_slicedToArray2","refreshing","setRefreshing","renderFooter","jsx","View","children","Button","title","onPress","user_token","useEffect","onRefresh","useCallback","resultSearchArticles","jsxs","SafeAreaView","style","styles","container","FlatList","data","refreshControl","RefreshControl","renderItem","_ref","item","tag_color","tags","tag_name","tag_color2","length","tag_name2","id","publishedAt","date","keyExtractor","ListFooterComponent","visible","StyleSheet","create","flex","alignItems","justifyContent","wrapper","width","input","marginBottom","borderWidth","borderColor","borderRadius","paddingHorizontal","link","color","_default","exports"],"sources":["C:/Users/idriss.drame/Projet/ApmNews/src/screens/HomeScreen.js"],"sourcesContent":["import React, {useContext, useEffect ,useState, useCallback} from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\n\nimport {Button,  SafeAreaView,FlatList, StyleSheet,Text, View,Dimensions,Image, RefreshControl, TouchableOpacity} from 'react-native';\nimport { ScrollView } from 'react-native-gesture-handler';\n\n\n\nimport Spinner from 'react-native-loading-spinner-overlay';\nimport {AuthContext} from '../context/AuthContext';\n\n\n\nimport Article from '../components/Articles';\n\nimport { SearchContext } from '../context/SearchContext';\n\n\n\n\n\n\n\n\nconst HomeScreen = () => {\n  const {userInfo, isLoading} = useContext(AuthContext);\n  const {resultSearch, setSearch,isLoadingSearch} = useContext(SearchContext);\n  const {getNews} = useContext(SearchContext);\n  const { categoryText, keywordText} = useContext(SearchContext);\n  const {count,incrementByFifteen} = useContext(SearchContext);\n \n  \n  \n\n   \n\n\n  const [refreshing, setRefreshing] = React.useState(false);\n  const renderFooter = () => {\n    return (\n      <View >\n\n        <Button title=\"Plus de dépêches\" onPress={() => { incrementByFifteen();    getNews(userInfo.user_token,categoryText,keywordText,incrementByFifteen());  }}  />\n      </View>\n    );\n  };\n\n  \n\n  useEffect(() => {\n   \n    getNews(userInfo.user_token,categoryText,keywordText,count);\n},[]);\n\n\n\n\nconst onRefresh = useCallback(() => {\n  setRefreshing(true);\n \n  getNews(userInfo.user_token,categoryText,keywordText,count);\n\n setRefreshing(false);\n\n\n \n\n}, );\n\nconst resultSearchArticles = resultSearch ;\n\n\n\n\n\n\nreturn(\n \n    <SafeAreaView style={styles.container}>\n\n\n  \n \n\n    \n\n        <FlatList\n            data= {(resultSearch)  }\n            refreshControl={\n              <RefreshControl refreshing={refreshing} onRefresh={onRefresh} />\n            }\n            renderItem = {({item}) =>\n                <Article\n                \n                  tag_color = {item.tags ? (item.tags[0].tag_color) : (\"\")}\n                  tag_name = {item.tags ? (item.tags[0].tag_name) : (\"\")}\n                  tag_color2 = {item.tags && item.tags.length > 1 ? (item.tags[1].tag_color) : (\"\")}\n                  tag_name2 = {item.tags && item.tags.length > 1? (item.tags[1].tag_name) : (\"\")}\n                    id = {item.id}\n                    title = {item.title}\n                    \n                    publishedAt = {item.date}               \n                  \n                    \n                />}\n              \n            keyExtractor = {(item) => item.title}\n          ListFooterComponent={renderFooter}\n          \n        />\n         \n <Spinner visible={isLoadingSearch} />\n\n\n \n    </SafeAreaView>\n  \n\n  \n   \n)\n\n\n\n  /*\n  return (\n    \n\n    <View style={styles.container}>     \n       \n            \n      <Spinner visible={isLoading} />\n    <Text>BIENVENUE DANS L'APPLI APM</Text>\n   \n    </View>\n  );*/\n};\n\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  wrapper: {\n    width: '80%',\n  },\n  \n  input: {\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: '#bbb',\n    borderRadius: 5,\n    paddingHorizontal: 14,\n  },\n  link: {\n    color: 'blue',\n  },\n});\n\nexport default HomeScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}